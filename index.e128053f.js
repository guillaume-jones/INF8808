function t(t){return t&&t.__esModule?t.default:t}function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each((function(t,e){r.set(e,t)}));else if(Array.isArray(t)){var a,i=-1,o=t.length;if(null==n)for(;++i<o;)r.set(i,t[i]);else for(;++i<o;)r.set(n(a=t[i],i,t),a)}else if(t)for(var u in t)r.set(u,t[u]);return r}e.prototype=n.prototype={constructor:e,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var r=n;function a(){}var i=r.prototype;function o(t,e){var n=new a;if(t instanceof a)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}a.prototype=o.prototype={constructor:a,has:i.has,add:function(t){return this["$"+(t+="")]=t,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each};function u(){}function c(t){return null==t?u:function(){return this.querySelector(t)}}function l(){return[]}function f(t){return new Array(t.length)}function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function h(t,e,n,r,a,i){for(var o,u=0,c=e.length,l=i.length;u<l;++u)(o=e[u])?(o.__data__=i[u],r[u]=o):n[u]=new s(t,i[u]);for(;u<c;++u)(o=e[u])&&(a[u]=o)}function d(t,e,n,r,a,i,o){var u,c,l,f={},h=e.length,d=i.length,p=new Array(h);for(u=0;u<h;++u)(c=e[u])&&(p[u]=l="$"+o.call(c,c.__data__,u,e),l in f?a[u]=c:f[l]=c);for(u=0;u<d;++u)(c=f[l="$"+o.call(t,i[u],u,i)])?(r[u]=c,c.__data__=i[u],f[l]=null):n[u]=new s(t,i[u]);for(u=0;u<h;++u)(c=e[u])&&f[p[u]]===c&&(a[u]=c)}function p(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function m(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),g.hasOwnProperty(e)?{space:g[e],local:t}:t}function v(t){return function(){this.removeAttribute(t)}}function b(t){return function(){this.removeAttributeNS(t.space,t.local)}}function y(t,e){return function(){this.setAttribute(t,e)}}function w(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function M(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A(t){return function(){this.style.removeProperty(t)}}function C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function T(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function N(t,e){return t.style.getPropertyValue(e)||M(t).getComputedStyle(t,null).getPropertyValue(e)}function S(t){return function(){delete this[t]}}function k(t,e){return function(){this[t]=e}}function D(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function U(t){return t.trim().split(/^|\s+/)}function E(t){return t.classList||new L(t)}function L(t){this._node=t,this._names=U(t.getAttribute("class")||"")}function F(t,e){for(var n=E(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function O(t,e){for(var n=E(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function B(t){return function(){F(this,t)}}function H(t){return function(){O(this,t)}}function j(t,e){return function(){(e.apply(this,arguments)?F:O)(this,t)}}function I(){this.textContent=""}function P(t){return function(){this.textContent=t}}function Y(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function $(){this.innerHTML=""}function q(t){return function(){this.innerHTML=t}}function z(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===n&&"http://www.w3.org/1999/xhtml"===e.documentElement.namespaceURI?e.createElement(t):e.createElementNS(n,t)}}function V(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Z(t){var e=m(t);return(e.local?V:R)(e)}function Q(){return null}function G(){var t=this.parentNode;t&&t.removeChild(this)}function J(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function K(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}L.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var tt={},et=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(tt={mouseenter:"mouseover",mouseleave:"mouseout"}));function nt(t,e,n){return t=rt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function rt(t,e,n){return function(r){var a=et;et=r;try{t.call(this,this.__data__,e,n)}finally{et=a}}}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function it(t){return function(){var e=this.__on;if(e){for(var n,r=0,a=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?e.length=a:delete this.__on}}}function ot(t,e,n){var r=tt.hasOwnProperty(t.type)?nt:rt;return function(a,i,o){var u,c=this.__on,l=r(e,i,o);if(c)for(var f=0,s=c.length;f<s;++f)if((u=c[f]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),void(u.value=e);this.addEventListener(t.type,l,n),u={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(u):this.__on=[u]}}function ut(t,e,n){var r=M(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function ct(t,e){return function(){return ut(this,t,e)}}function lt(t,e){return function(){return ut(this,t,e.apply(this,arguments))}}var ft=[null];function st(t,e){this._groups=t,this._parents=e}function ht(){return new st([[document.documentElement]],ft)}st.prototype=ht.prototype={constructor:st,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=e[a],l=u.length,f=r[a]=new Array(l),s=0;s<l;++s)(i=u[s])&&(o=t.call(i,i.__data__,s,u))&&("__data__"in i&&(o.__data__=i.__data__),f[s]=o);return new st(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?l:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,a=[],i=[],o=0;o<r;++o)for(var u,c=n[o],f=c.length,s=0;s<f;++s)(u=c[s])&&(a.push(t.call(u,u.__data__,s,c)),i.push(u));return new st(a,i)},filter:function(t){var e;"function"!=typeof t&&(e=t,t=function(){return this.matches(e)});for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i)for(var o,u=n[i],c=u.length,l=a[i]=[],f=0;f<c;++f)(o=u[f])&&t.call(o,o.__data__,f,u)&&l.push(o);return new st(a,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),f=-1,this.each((function(t){m[++f]=t})),m;var n,r=e?d:h,a=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=i.length,u=new Array(o),c=new Array(o),l=new Array(o),f=0;f<o;++f){var s=a[f],p=i[f],g=p.length,m=t.call(s,s&&s.__data__,f,a),v=m.length,b=c[f]=new Array(v),y=u[f]=new Array(v);r(s,p,b,y,l[f]=new Array(g),m,e);for(var w,x,_=0,M=0;_<v;++_)if(w=b[_]){for(_>=M&&(M=_+1);!(x=y[M])&&++M<v;);w._next=x||null}}return(u=new st(u,a))._enter=c,u._exit=l,u},enter:function(){return new st(this._enter||this._groups.map(f),this._parents)},exit:function(){return new st(this._exit||this._groups.map(f),this._parents)},join:function(t,e,n){var r=this.enter(),a=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(a=e(a)),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var c,l=e[u],f=n[u],s=l.length,h=o[u]=new Array(s),d=0;d<s;++d)(c=l[d]||f[d])&&(h[d]=c);for(;u<r;++u)o[u]=e[u];return new st(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,a=t[e],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=p);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],c=u.length,l=a[i]=new Array(c),f=0;f<c;++f)(o=u[f])&&(l[f]=o);l.sort(e)}return new st(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,u=i.length;o<u;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function(t,e){var n=m(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?b:v:"function"==typeof e?n.local?_:x:n.local?w:y)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?A:"function"==typeof e?T:C)(t,e,null==n?"":n)):N(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?S:"function"==typeof e?D:k)(t,e)):this.node()[t]},classed:function(t,e){var n=U(t+"");if(arguments.length<2){for(var r=E(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?j:e?B:H)(n,e))},text:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?Y:P)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$:("function"==typeof t?z:q)(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(X)},append:function(t){var e="function"==typeof t?t:Z(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Z(t),r=null==e?Q:"function"==typeof e?e:c(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(G)},clone:function(t){return this.select(t?K:J)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,a,i=at(t+""),o=i.length;if(!(arguments.length<2)){for(u=e?ot:it,null==n&&(n=!1),r=0;r<o;++r)this.each(u(i[r],e,n));return this}var u=this.node().__on;if(u)for(var c,l=0,f=u.length;l<f;++l)for(r=0,c=u[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?lt:ct)(t,e))}};var dt=ht;function pt(t){return"string"==typeof t?new st([[document.querySelector(t)]],[document.documentElement]):new st([[t]],ft)}function gt(){var t=function(){return"n"},e=function(){return[0,0]},n=function(){return" "},a=document.body,i=h(),o=null,u=null,c=null;function l(t){var e;e=t.node(),(o=e?"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement:null)&&(u=o.createSVGPoint(),a.appendChild(i))}l.show=function(){var r=Array.prototype.slice.call(arguments);r[r.length-1]instanceof SVGElement&&(c=r.pop());var i,o=n.apply(this,r),u=e.apply(this,r),h=t.apply(this,r),p=d(),g=s.length,m=document.documentElement.scrollTop||a.scrollTop,v=document.documentElement.scrollLeft||a.scrollLeft;for(p.html(o).style("opacity",1).style("pointer-events","all");g--;)p.classed(s[g],!1);return i=f.get(h).apply(this),p.classed(h,!0).style("top",i.top+u[0]+m+"px").style("left",i.left+u[1]+v+"px"),l},l.hide=function(){return d().style("opacity",0).style("pointer-events","none"),l},l.attr=function(t,e){if(arguments.length<2&&"string"==typeof t)return d().attr(t);var n=Array.prototype.slice.call(arguments);return dt.prototype.attr.apply(d(),n),l},l.style=function(t,e){if(arguments.length<2&&"string"==typeof t)return d().style(t);var n=Array.prototype.slice.call(arguments);return dt.prototype.style.apply(d(),n),l},l.direction=function(e){return arguments.length?(t=null==e?e:g(e),l):t},l.offset=function(t){return arguments.length?(e=null==t?t:g(t),l):e},l.html=function(t){return arguments.length?(n=null==t?t:g(t),l):n},l.rootElement=function(t){return arguments.length?(a=null==t?t:g(t),l):a},l.destroy=function(){return i&&(d().remove(),i=null),l};var f=r({n:function(){var t=p(this);return{top:t.n.y-i.offsetHeight,left:t.n.x-i.offsetWidth/2}},s:function(){var t=p(this);return{top:t.s.y,left:t.s.x-i.offsetWidth/2}},e:function(){var t=p(this);return{top:t.e.y-i.offsetHeight/2,left:t.e.x}},w:function(){var t=p(this);return{top:t.w.y-i.offsetHeight/2,left:t.w.x-i.offsetWidth}},nw:function(){var t=p(this);return{top:t.nw.y-i.offsetHeight,left:t.nw.x-i.offsetWidth}},ne:function(){var t=p(this);return{top:t.ne.y-i.offsetHeight,left:t.ne.x}},sw:function(){var t=p(this);return{top:t.sw.y,left:t.sw.x-i.offsetWidth}},se:function(){var t=p(this);return{top:t.se.y,left:t.se.x}}}),s=f.keys();function h(){var t=pt(document.createElement("div"));return t.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function d(){return null==i&&(i=h(),a.appendChild(i)),pt(i)}function p(t){for(var e=c||t;null==e.getScreenCTM&&null!=e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),a=e.getBBox(),i=a.width,o=a.height,l=a.x,f=a.y;return u.x=l,u.y=f,n.nw=u.matrixTransform(r),u.x+=i,n.ne=u.matrixTransform(r),u.y+=o,n.se=u.matrixTransform(r),u.x-=i,n.sw=u.matrixTransform(r),u.y-=o/2,n.w=u.matrixTransform(r),u.x+=i,n.e=u.matrixTransform(r),u.x-=i/2,u.y-=o/2,n.n=u.matrixTransform(r),u.y+=o,n.s=u.matrixTransform(r),n}function g(t){return"function"==typeof t?t:function(){return t}}return l}var mt,vt;vt=function(t,e,n,r){var a=t[0],i=t[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var u=(r-n)/2,c=0,l=u-1;c<u;l=c++){var f=e[n+2*c+0],s=e[n+2*c+1],h=e[n+2*l+0],d=e[n+2*l+1];s>i!=d>i&&a<(h-f)*(i-s)/(d-s)+f&&(o=!o)}return o};var bt;async function yt(){return await d3.json("montreal.json")}async function wt(){return await d3.json("reseau_cyclable.geojson")}function xt(e,n,r){let a="";return r.forEach((r=>{t(mt)([e,n],r.geometry.coordinates[0][0])&&(a=r.properties.NOM)})),a}function _t(t){return d3.geoPath().projection(t)}function Mt(t,e,n){const r=n([t,e]);return{x:r[0],y:r[1]}}function At(t,e=""){return e&&(t=t.map((t=>t[e]))),t.reduce(((t,e)=>t+(isNaN(e)?0:e)),0)}function Ct(t,e,n){return t.reduce(((t,r)=>(t[r[e]]=(t[r[e]]||0)+(isNaN(r[n])?0:r[n]),t)),{})}async function Tt(t){const e={};return await Promise.all(t.map((async t=>{e[t]=await d3.csv("comptage_velo_"+t+".csv")}))),e}async function Nt(){return await d3.csv("localisation_des_compteurs_velo.csv")}function St(t,e,n,r){const a={};return n.forEach((n=>{const i=e[n];a[n]={};const o=Object.keys(i[0]).filter((t=>"Date"!==t&&""!==t));o.forEach((e=>{const i=t.find((t=>e.includes("compteur")?e.includes(t.ID):t.Nom===e));a[n][i.Nom]={name:i.Nom,longitude:i.Longitude,latitude:i.Latitude,neighborhood:xt(i.Longitude,i.Latitude,r),counts:[]}})),i.forEach((e=>{let r,i="00:00";Object.entries(e).map((([t,e])=>{if("Date"===t){const t=e.split(" ");r=t[0],t.length>1&&(i=t[1])}return[t,e]})).filter((([t])=>o.includes(t))).forEach((([e,o])=>{parseInt(n)>2018&&(e=t.find((t=>e.includes(t.ID))).Nom),a[n][e].counts.push({date:r,time:i,count:parseInt(o)})}))}))})),a}function kt(t,e){const n={};return Object.entries(t).forEach((([t,r])=>{n[t]=Object.entries(r).map((([t,n])=>({name:t,neighborhood:n.neighborhood,counts:At(n.counts,"count"),...Mt(n.longitude,n.latitude,e)})))})),n}function Dt(t,e){const n={};return Object.entries(e).forEach((([e,r])=>{const a={},i={};r.forEach((t=>{a[t.neighborhood]=(a[t.neighborhood]??0)+t.counts,i[t.neighborhood]=(i[t.neighborhood]??0)+1})),n[e]=t.map((t=>{const e=t.properties.NOM;return{type:"Feature",geometry:t.geometry,name:e,averageCounts:Math.round(a[e]/i[e])||0}}))})),n}function Ut(t){const e={};return Object.entries(t).forEach((([t,n])=>{let r;e[t]={},Object.entries(n).forEach((([n,a])=>{let i=[];i=a.counts.length>366?Object.values(Ct(a.counts,"date","count")):a.counts.map((t=>isNaN(t.count)?0:t.count)),r?i.map(((t,e)=>{r[e]+=t})):r=i;const o=a.neighborhood;e[t][n]={name:n,neighborhood:o,counts:i.map(((t,e)=>({index:e,value:t})))};const u=e[t][o];e[t][o]={name:o,counts:i.map(((t,e)=>({index:e,value:(u?u.counts[e].value:0)+t})))}}));const a=Object.keys(n).length;e[t].Average={name:"All",neighborhood:"",counts:r.map(((t,e)=>({index:e,value:Math.round(t/a)})))}})),e}function Et(t){const e={};return Object.entries(t).forEach((([t,n])=>{if(parseInt(t)<2019)return;let r;e[t]={},Object.entries(n).forEach((([n,a])=>{let i=Object.values(Ct(a.counts,"time","count"));r?i.map(((t,e)=>{r[e]+=t})):r=i,e[t][n]={name:n,counts:i.map(((t,e)=>({index:e,value:t})))};const o=a.neighborhood,u=e[t][o];e[t][o]={name:o,counts:i.map(((t,e)=>({index:e,value:(u?u.counts[e].value:0)+t})))}}));const a=Object.keys(n).length;e[t].Average={name:"All",counts:r.map(((t,e)=>({index:e,value:Math.round(t/a)})))}})),e}function Lt(t){const e={};return Object.entries(t).forEach((([t,n])=>{let r=0;Object.entries(n).forEach((([n,a])=>{const i={year:t,counts:At(a.counts,"count")};r+=i.counts,e[n]?e[n].push(i):e[n]=[i];const o=a.neighborhood,u=e[o]&&e[o].find((e=>e.year===t));if(u)u.counts*=u.total,u.counts+=i.counts,u.total+=1,u.counts/=u.total;else{const n={year:t,counts:i.counts,total:1};e[o]?e[o].push(n):e[o]=[n]}}));const a={year:t,counts:Math.round(r/Object.keys(n).length)};e.Average?e.Average.push(a):e.Average=[a]})),e}function Ft(t,e,n,r,a){const i=d3.select("#map-base-g"),o=function(t){const e=d3.max(t.map((t=>t.averageCounts)));return d3.scaleLinear().domain([0,e+1e5]).range(["rgba(0,0,0,0)","#063fc4"])}(t);i.selectAll("path").remove(),i.selectAll("path").data(t).enter().append("path").attr("d",n).attr("fill",(t=>o(t.averageCounts))).attr("stroke","#ffffff").attr("stroke-width",1).on("click",r).on("mouseover",(function(){d3.select(this).each(a.show).transition(1e3).ease(d3.easeCubicInOut).attr("fill",(t=>o(t.averageCounts+1e5))).attr("stroke-width",3)})).on("mouseout",(function(){d3.select(this).each(a.hide).transition(1e3).ease(d3.easeCubicInOut).attr("fill",(t=>o(t.averageCounts))).attr("stroke-width",1)})),function(t,e){d3.select("#map-lanes-g").selectAll("path").data(t).enter().append("path").attr("d",e).attr("fill","rgba(0,0,0,0)").attr("stroke","#1ac96c").attr("stroke-width",1).attr("pointer-events","none")}(e,n)}function Ot(t,e){d3.select("#map-circles-g").selectAll("circle").filter((function(){return!d3.select(this).attr("clicked")})).each(e.hide).transition(500).ease(d3.easeCubicInOut).attr("r",(e=>t(e.counts))).attr("stroke-width",1)}function Bt(t,e,n){const r=function(t){const e=d3.max(t.map((t=>t.counts)));return d3.scaleLinear().domain([0,e]).range([3,9])}(t);d3.select("#map-circles-g").selectAll("circle").remove(),d3.select("#map-circles-g").selectAll("circle").data(t).enter().append("circle").attr("class","circle").attr("r",(t=>r(t.counts))).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("fill","#f58516").attr("stroke","#ffffff").attr("stroke-width",1).on("click",(function(t){e(t),d3.select("#map-circles-g").selectAll("circle").attr("clicked",null),d3.select(this).attr("clicked",!0),Ot(r,n)})).on("mouseover",(function(){d3.select(this).each(n.show).transition(500).ease(d3.easeCubicInOut).attr("r",(t=>1.5*r(t.counts))).attr("stroke-width",2)})).on("mouseout",(function(){Ot(r,n)}))}(mt=function(t,e,n,r){return e.length>0&&Array.isArray(e[0])?bt(t,e,n,r):vt(t,e,n,r)}).nested=bt=function(t,e,n,r){var a=t[0],i=t[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var u=r-n,c=0,l=u-1;c<u;l=c++){var f=e[c+n][0],s=e[c+n][1],h=e[l+n][0],d=e[l+n][1];s>i!=d>i&&a<(h-f)*(i-s)/(d-s)+f&&(o=!o)}return o},mt.flat=vt;var Ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ht.hasOwnProperty(e)?{space:Ht[e],local:t}:t}function It(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===n&&"http://www.w3.org/1999/xhtml"===e.documentElement.namespaceURI?e.createElement(t):e.createElementNS(n,t)}}function Pt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Yt(t){var e=jt(t);return(e.local?Pt:It)(e)}var $t=0;function qt(){this._="@"+(++$t).toString(36)}qt.prototype=function(){return new qt}.prototype={constructor:qt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var zt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Wt=document.documentElement;if(!Wt.matches){var Xt=Wt.webkitMatchesSelector||Wt.msMatchesSelector||Wt.mozMatchesSelector||Wt.oMatchesSelector;zt=function(t){return function(){return Xt.call(this,t)}}}}var Rt=zt,Vt={},Zt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Vt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Qt(t,e,n){return t=Gt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Gt(t,e,n){return function(r){var a=Zt;Zt=r;try{t.call(this,this.__data__,e,n)}finally{Zt=a}}}function Jt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Kt(t){return function(){var e=this.__on;if(e){for(var n,r=0,a=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?e.length=a:delete this.__on}}}function te(t,e,n){var r=Vt.hasOwnProperty(t.type)?Qt:Gt;return function(a,i,o){var u,c=this.__on,l=r(e,i,o);if(c)for(var f=0,s=c.length;f<s;++f)if((u=c[f]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),void(u.value=e);this.addEventListener(t.type,l,n),u={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(u):this.__on=[u]}}function ee(){}function ne(t){return null==t?ee:function(){return this.querySelector(t)}}function re(){return[]}function ae(t){return new Array(t.length)}function ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ie.prototype={constructor:ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function oe(t,e,n,r,a,i){for(var o,u=0,c=e.length,l=i.length;u<l;++u)(o=e[u])?(o.__data__=i[u],r[u]=o):n[u]=new ie(t,i[u]);for(;u<c;++u)(o=e[u])&&(a[u]=o)}function ue(t,e,n,r,a,i,o){var u,c,l,f={},s=e.length,h=i.length,d=new Array(s);for(u=0;u<s;++u)(c=e[u])&&(d[u]=l="$"+o.call(c,c.__data__,u,e),l in f?a[u]=c:f[l]=c);for(u=0;u<h;++u)(c=f[l="$"+o.call(t,i[u],u,i)])?(r[u]=c,c.__data__=i[u],f[l]=null):n[u]=new ie(t,i[u]);for(u=0;u<s;++u)(c=e[u])&&f[d[u]]===c&&(a[u]=c)}function ce(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function le(t){return function(){this.removeAttribute(t)}}function fe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function se(t,e){return function(){this.setAttribute(t,e)}}function he(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function de(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function pe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function me(t){return function(){this.style.removeProperty(t)}}function ve(t,e,n){return function(){this.style.setProperty(t,e,n)}}function be(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ye(t){return function(){delete this[t]}}function we(t,e){return function(){this[t]=e}}function xe(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function _e(t){return t.trim().split(/^|\s+/)}function Me(t){return t.classList||new Ae(t)}function Ae(t){this._node=t,this._names=_e(t.getAttribute("class")||"")}function Ce(t,e){for(var n=Me(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function Te(t,e){for(var n=Me(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function Ne(t){return function(){Ce(this,t)}}function Se(t){return function(){Te(this,t)}}function ke(t,e){return function(){(e.apply(this,arguments)?Ce:Te)(this,t)}}function De(){this.textContent=""}function Ue(t){return function(){this.textContent=t}}function Ee(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Le(){this.innerHTML=""}function Fe(t){return function(){this.innerHTML=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Be(){this.nextSibling&&this.parentNode.appendChild(this)}function He(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function je(){return null}function Ie(){var t=this.parentNode;t&&t.removeChild(this)}function Pe(t,e,n){var r=ge(t),a=r.CustomEvent;a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Ye(t,e){return function(){return Pe(this,t,e)}}function $e(t,e){return function(){return Pe(this,t,e.apply(this,arguments))}}Ae.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var qe=[null];function ze(t,e){this._groups=t,this._parents=e}function We(){return new ze([[document.documentElement]],qe)}ze.prototype=We.prototype={constructor:ze,select:function(t){"function"!=typeof t&&(t=ne(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=e[a],c=u.length,l=r[a]=new Array(c),f=0;f<c;++f)(i=u[f])&&(o=t.call(i,i.__data__,f,u))&&("__data__"in i&&(o.__data__=i.__data__),l[f]=o);return new ze(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?re:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,a=[],i=[],o=0;o<r;++o)for(var u,c=n[o],l=c.length,f=0;f<l;++f)(u=c[f])&&(a.push(t.call(u,u.__data__,f,c)),i.push(u));return new ze(a,i)},filter:function(t){"function"!=typeof t&&(t=Rt(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o=e[a],u=o.length,c=r[a]=[],l=0;l<u;++l)(i=o[l])&&t.call(i,i.__data__,l,o)&&c.push(i);return new ze(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each((function(t){p[++f]=t})),p;var n,r=e?ue:oe,a=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=i.length,u=new Array(o),c=new Array(o),l=new Array(o),f=0;f<o;++f){var s=a[f],h=i[f],d=h.length,p=t.call(s,s&&s.__data__,f,a),g=p.length,m=c[f]=new Array(g),v=u[f]=new Array(g);r(s,h,m,v,l[f]=new Array(d),p,e);for(var b,y,w=0,x=0;w<g;++w)if(b=m[w]){for(w>=x&&(x=w+1);!(y=v[x])&&++x<g;);b._next=y||null}}return(u=new ze(u,a))._enter=c,u._exit=l,u},enter:function(){return new ze(this._enter||this._groups.map(ae),this._parents)},exit:function(){return new ze(this._exit||this._groups.map(ae),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var c,l=e[u],f=n[u],s=l.length,h=o[u]=new Array(s),d=0;d<s;++d)(c=l[d]||f[d])&&(h[d]=c);for(;u<r;++u)o[u]=e[u];return new ze(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,a=t[e],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ce);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],c=u.length,l=a[i]=new Array(c),f=0;f<c;++f)(o=u[f])&&(l[f]=o);l.sort(e)}return new ze(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,u=i.length;o<u;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function(t,e){var n=jt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?fe:le:"function"==typeof e?n.local?pe:de:n.local?he:se)(n,e))},style:function(t,e,n){var r;return arguments.length>1?this.each((null==e?me:"function"==typeof e?be:ve)(t,e,null==n?"":n)):ge(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?ye:"function"==typeof e?xe:we)(t,e)):this.node()[t]},classed:function(t,e){var n=_e(t+"");if(arguments.length<2){for(var r=Me(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?ke:e?Ne:Se)(n,e))},text:function(t){return arguments.length?this.each(null==t?De:("function"==typeof t?Ee:Ue)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Le:("function"==typeof t?Oe:Fe)(t)):this.node().innerHTML},raise:function(){return this.each(Be)},lower:function(){return this.each(He)},append:function(t){var e="function"==typeof t?t:Yt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Yt(t),r=null==e?je:"function"==typeof e?e:ne(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ie)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,a,i=Jt(t+""),o=i.length;if(!(arguments.length<2)){for(u=e?te:Kt,null==n&&(n=!1),r=0;r<o;++r)this.each(u(i[r],e,n));return this}var u=this.node().__on;if(u)for(var c,l=0,f=u.length;l<f;++l)for(r=0,c=u[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?$e:Ye)(t,e))}};var Xe;function Re(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ve(t){return(t=Re(Math.abs(t)))?t[1]:NaN}function Ze(t,e){var n=Re(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var Qe={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,a=1,i=-1;a<r;++a)switch(t[a]){case".":i=n=a;break;case"0":0===i&&(i=a),n=a;break;case"e":break t;default:i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ze(100*t,e)},r:Ze,s:function(t,e){var n=Re(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(Xe=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Re(t,Math.max(0,e+i-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ge=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Je(t){return new Ke(t)}function Ke(t){if(!(e=Ge.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",a=e[3]||"-",i=e[4]||"",o=!!e[5],u=e[6]&&+e[6],c=!!e[7],l=e[8]&&+e[8].slice(1),f=e[9]||"";"n"===f?(c=!0,f="g"):Qe[f]||(f=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=a,this.symbol=i,this.zero=o,this.width=u,this.comma=c,this.precision=l,this.type=f}Ke.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var tn,en,nn,rn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function an(t){return t}function on(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var a=t.length,i=[],o=0,u=e[0],c=0;a>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),i.push(t.substring(a-=u,a+u)),!((c+=u+1)>r));)u=e[o=(o+1)%e.length];return i.reverse().join(n)}):an,a=t.currency,i=t.decimal;function o(t){var e=(t=Je(t)).fill,n=t.align,o=t.sign,u=t.symbol,c=t.zero,l=t.width,f=t.comma,s=t.precision,h=t.type,d="$"===u?a[0]:"#"===u&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",p="$"===u?a[1]:/[%p]/.test(h)?"%":"",g=Qe[h],m=!h||/[defgprs%]/.test(h);function v(t){var a,u,v,b=d,y=p;if("c"===h)y=g(t)+y,t="";else{var w=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=g(t,s),w)for(a=-1,u=t.length,w=!1;++a<u;)if(48<(v=t.charCodeAt(a))&&v<58||"x"===h&&96<v&&v<103||"X"===h&&64<v&&v<71){w=!0;break}if(b=(w?"("===o?o:"-":"-"===o||"("===o?"":o)+b,y=y+("s"===h?rn[8+Xe/3]:"")+(w&&"("===o?")":""),m)for(a=-1,u=t.length;++a<u;)if(48>(v=t.charCodeAt(a))||v>57){y=(46===v?i+t.slice(a+1):t.slice(a))+y,t=t.slice(0,a);break}}f&&!c&&(t=r(t,1/0));var x=b.length+t.length+y.length,_=x<l?new Array(l-x+1).join(e):"";switch(f&&c&&(t=r(_+t,_.length?l-y.length:1/0),_=""),n){case"<":return b+t+y+_;case"=":return b+_+t+y;case"^":return _.slice(0,x=_.length>>1)+b+t+y+_.slice(x)}return _+b+t+y}return s=null==s?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,s)):Math.max(0,Math.min(20,s)),v.toString=function(){return t+""},v}return{format:o,formatPrefix:function(t,e){var n=o(((t=Je(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ve(e)/3))),a=Math.pow(10,-r),i=rn[8+r/3];return function(t){return n(a*t)+i}}}}function un(t){return Math.max(0,-Ve(Math.abs(t)))}function cn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ve(e)/3)))-Ve(Math.abs(t)))}function ln(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ve(e)-Ve(t))+1}tn=on({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),en=tn.format,nn=tn.formatPrefix;var fn={value:function(){}};function sn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new hn(r)}function hn(t){this._=t}function dn(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function pn(t,e){for(var n,r=0,a=t.length;r<a;++r)if((n=t[r]).name===e)return n.value}function gn(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=fn,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}hn.prototype=sn.prototype={constructor:hn,on:function(t,e){var n,r=this._,a=dn(t+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<o;)if(n=(t=a[i]).type)r[n]=gn(r[n],t.name,e);else if(null==e)for(n in r)r[n]=gn(r[n],t.name,null);return this}for(;++i<o;)if((n=(t=a[i]).type)&&(n=pn(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new hn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};var mn=sn;function vn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bn(t){var e;return 1===t.length&&(e=t,t=function(t,n){return vn(e(t),n)}),{left:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)<0?r=i+1:a=i}return r},right:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)>0?a=i:r=i+1}return r}}}var yn=bn(vn),wn=yn.right,xn=(yn.left,wn);var _n=Array.prototype;_n.slice,_n.map;function Mn(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(a);++r<a;)i[r]=t+r*n;return i}var An=Math.sqrt(50),Cn=Math.sqrt(10),Tn=Math.sqrt(2);function Nn(t,e,n){var r=Sn(t,e,n);return Mn(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function Sn(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=An?a*=10:i>=Cn?a*=5:i>=Tn&&(a*=2),e<t?-a:a}function kn(t,e){var n,r,a=-1,i=t.length;if(null==e){for(;++a<i;)if(null!=(r=t[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=t[a])&&r>n&&(n=r)}else{for(;++a<i;)if(null!=(r=e(t[a],a,t))&&r>=r){n=r;break}for(;++a<i;)null!=(r=e(t[a],a,t))&&r>n&&(n=r)}return n}function Dn(t,e){var n,r=0,a=t.length,i=-1;if(null==e)for(;++i<a;)(n=+t[i])&&(r+=n);else for(;++i<a;)(n=+e(t[i],i,t))&&(r+=n);return r}var Un=Array.prototype,En=Un.map,Ln=Un.slice;function Fn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function On(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Bn(){}var Hn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",jn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",In=/^#([0-9a-f]{3,8})$/,Pn=new RegExp("^rgb\\("+["\\s*([+-]?\\d+)\\s*","\\s*([+-]?\\d+)\\s*","\\s*([+-]?\\d+)\\s*"]+"\\)$"),Yn=new RegExp("^rgb\\("+[jn,jn,jn]+"\\)$"),$n=new RegExp("^rgba\\("+["\\s*([+-]?\\d+)\\s*","\\s*([+-]?\\d+)\\s*","\\s*([+-]?\\d+)\\s*",Hn]+"\\)$"),qn=new RegExp("^rgba\\("+[jn,jn,jn,Hn]+"\\)$"),zn=new RegExp("^hsl\\("+[Hn,jn,jn]+"\\)$"),Wn=new RegExp("^hsla\\("+[Hn,jn,jn,Hn]+"\\)$"),Xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rn(){return this.rgb().formatHex()}function Vn(){return this.rgb().formatRgb()}function Zn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=In.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Qn(e):3===n?new tr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Gn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Gn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pn.exec(t))?new tr(e[1],e[2],e[3],1):(e=Yn.exec(t))?new tr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=$n.exec(t))?Gn(e[1],e[2],e[3],e[4]):(e=qn.exec(t))?Gn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=zn.exec(t))?ar(e[1],e[2]/100,e[3]/100,1):(e=Wn.exec(t))?ar(e[1],e[2]/100,e[3]/100,e[4]):Xn.hasOwnProperty(t)?Qn(Xn[t]):"transparent"===t?new tr(NaN,NaN,NaN,0):null}function Qn(t){return new tr(t>>16&255,t>>8&255,255&t,1)}function Gn(t,e,n,r){return r<=0&&(t=e=n=NaN),new tr(t,e,n,r)}function Jn(t){return t instanceof Bn||(t=Zn(t)),t?new tr((t=t.rgb()).r,t.g,t.b,t.opacity):new tr}function Kn(t,e,n,r){return 1===arguments.length?Jn(t):new tr(t,e,n,null==r?1:r)}function tr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function er(){return"#"+rr(this.r)+rr(this.g)+rr(this.b)}function nr(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function rr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ar(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new or(t,e,n,r)}function ir(t){if(t instanceof or)return new or(t.h,t.s,t.l,t.opacity);if(t instanceof Bn||(t=Zn(t)),!t)return new or;if(t instanceof or)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,u=i-a,c=(i+a)/2;return u?(o=e===i?(n-r)/u+6*(n<r):n===i?(r-e)/u+2:(e-n)/u+4,u/=c<.5?i+a:2-i-a,o*=60):u=c>0&&c<1?0:o,new or(o,u,c,t.opacity)}function or(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ur(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Fn(Bn,Zn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Rn,formatHex:Rn,formatHsl:function(){return ir(this).formatHsl()},formatRgb:Vn,toString:Vn}),Fn(tr,Kn,On(Bn,{brighter:function(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new tr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:er,formatHex:er,formatRgb:nr,toString:nr})),Fn(or,(function(t,e,n,r){return 1===arguments.length?ir(t):new or(t,e,n,null==r?1:r)}),On(Bn,{brighter:function(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new or(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new or(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new tr(ur(t>=240?t-240:t+120,a,r),ur(t,a,r),ur(t<120?t+240:t-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var cr=Math.PI/180,lr=180/Math.PI;function fr(t){if(t instanceof hr)return new hr(t.h,t.s,t.l,t.opacity);t instanceof tr||(t=Jn(t));var e=t.r/255,n=t.g/255,r=t.b/255,a=(-.6557636667999999*r+-1.7884503806*e-3.5172982438*n)/-5.9615122912,i=r-a,o=(1.97294*(n-a)- -.29227*i)/-.90649,u=Math.sqrt(o*o+i*i)/(1.97294*a*(1-a)),c=u?Math.atan2(o,i)*lr-120:NaN;return new hr(c<0?c+360:c,u,a,t.opacity)}function sr(t,e,n,r){return 1===arguments.length?fr(t):new hr(t,e,n,null==r?1:r)}function hr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function dr(t,e,n,r,a){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*r+o*a)/6}function pr(t){return function(){return t}}function gr(t,e){return function(n){return t+n*e}}function mr(t){return 1==(t=+t)?vr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):pr(isNaN(e)?n:e)}}function vr(t,e){var n=e-t;return n?gr(t,n):pr(isNaN(t)?e:t)}Fn(hr,sr,On(Bn,{brighter:function(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new hr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new hr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*cr,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),a=Math.sin(t);return new tr(255*(e+n*(-.14861*r+1.78277*a)),255*(e+n*(-.29227*r+-.90649*a)),255*(e+n*(1.97294*r)),this.opacity)}}));var br=function t(e){var n=mr(e);function r(t,e){var r=n((t=Kn(t)).r,(e=Kn(e)).r),a=n(t.g,e.g),i=n(t.b,e.b),o=vr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=i(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function yr(t){return function(e){var n,r,a=e.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Kn(e[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=t(i),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=i(t),r.g=o(t),r.b=u(t),r+""}}}yr((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[r],i=t[r+1],o=r>0?t[r-1]:2*a-i,u=r<e-1?t[r+2]:2*i-a;return dr((n-r/e)*e,o,a,i,u)}})),yr((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),a=t[(r+e-1)%e],i=t[r%e],o=t[(r+1)%e],u=t[(r+2)%e];return dr((n-r/e)*e,a,i,o,u)}}));function wr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,a=e.slice();return function(i){for(n=0;n<r;++n)a[n]=t[n]*(1-i)+e[n]*i;return a}}function xr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _r(t,e){var n,r=e?e.length:0,a=t?Math.min(r,t.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=kr(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<a;++n)o[n]=i[n](t);return o}}function Mr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ar(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Cr(t,e){var n,r={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=kr(t[n],e[n]):a[n]=e[n];return function(t){for(n in r)a[n]=r[n](t);return a}}var Tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nr=new RegExp(Tr.source,"g");function Sr(t,e){var n,r,a,i=Tr.lastIndex=Nr.lastIndex=0,o=-1,u=[],c=[];for(t+="",e+="";(n=Tr.exec(t))&&(r=Nr.exec(e));)(a=r.index)>i&&(a=e.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,c.push({i:o,x:Ar(n,r)})),i=Nr.lastIndex;return i<e.length&&(a=e.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)u[(n=c[r]).i]=n.x(t);return u.join("")})}function kr(t,e){var n,r=typeof e;return null==e||"boolean"===r?pr(e):("number"===r?Ar:"string"===r?(n=Zn(e))?(e=n,br):Sr:e instanceof Zn?br:e instanceof Date?Mr:xr(e)?wr:Array.isArray(e)?_r:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Cr:Ar)(t,e)}function Dr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ur(t){return function e(n){function r(e,r){var a=t((e=sr(e)).h,(r=sr(r)).h),i=vr(e.s,r.s),o=vr(e.l,r.l),u=vr(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=i(t),e.l=o(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,r.gamma=e,r}(1)}Ur((function(t,e){var n=e-t;return n?gr(t,n>180||n<-180?n-360*Math.round(n/360):n):pr(isNaN(t)?e:t)}));var Er=Ur(vr);function Lr(t){return function(){return t}}function Fr(t){return+t}var Or=[0,1];function Br(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lr(e)}function Hr(t,e,n,r){var a=t[0],i=t[1],o=e[0],u=e[1];return i<a?(a=n(i,a),o=r(u,o)):(a=n(a,i),o=r(o,u)),function(t){return o(a(t))}}function jr(t,e,n,r){var a=Math.min(t.length,e.length)-1,i=new Array(a),o=new Array(a),u=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<a;)i[u]=n(t[u],t[u+1]),o[u]=r(e[u],e[u+1]);return function(e){var n=xn(t,e,1,a)-1;return o[n](i[n](e))}}function Ir(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Pr(t,e){var n,r,a,i=Or,o=Or,u=kr,c=!1;function l(){return n=Math.min(i.length,o.length)>2?jr:Hr,r=a=null,f}function f(e){return(r||(r=n(i,o,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,u)))(+e)}return f.invert=function(t){return(a||(a=n(o,i,Br,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},f.domain=function(t){return arguments.length?(i=En.call(t,Fr),l()):i.slice()},f.range=function(t){return arguments.length?(o=Ln.call(t),l()):o.slice()},f.rangeRound=function(t){return o=Ln.call(t),u=Dr,l()},f.clamp=function(t){return arguments.length?(c=!!t,l()):c},f.interpolate=function(t){return arguments.length?(u=t,l()):u},l()}function Yr(t,e,n){var r,a=t[0],i=t[t.length-1],o=Sn(a,i,null==e?10:e);switch((n=Je(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(a),Math.abs(i));return null!=n.precision||isNaN(r=cn(o,u))||(n.precision=r),nn(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=ln(o,Math.max(Math.abs(a),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=un(o))||(n.precision=r-2*("%"===n.type))}return en(n)}function $r(t){var e=t.domain;return t.ticks=function(t){var n=e();return Nn(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Yr(e(),t,n)},t.nice=function(n){var r=e(),a=r.length-1,i=null==n?10:n,o=r[0],u=r[a],c=Sn(o,u,i);return c&&(c=Sn(Math.floor(o/c)*c,Math.ceil(u/c)*c,i),r[0]=Math.floor(o/c)*c,r[a]=Math.ceil(u/c)*c,e(r)),t},t}function qr(){var t=Pr(Br,Ar);return t.copy=function(){return Ir(t,qr())},$r(t)}var zr=new Date,Wr=new Date;function Xr(t,e,n,r){function a(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return a.floor=function(e){return t(e=new Date(+e)),e},a.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return u;do{u.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return u},a.filter=function(n){return Xr((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(a.count=function(e,r){return zr.setTime(+e),Wr.setTime(+r),t(zr),t(Wr),Math.floor(n(zr,Wr))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(r?function(e){return r(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}var Rr=Xr((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Rr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Xr((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Rr:null};Rr.range;var Vr=Xr((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Zr=(Vr.range,Xr((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Qr=(Zr.range,Xr((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Gr=(Qr.range,Xr((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),Jr=Gr;Gr.range;function Kr(t){return Xr((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var ta=Kr(0),ea=Kr(1),na=Kr(2),ra=Kr(3),aa=Kr(4),ia=Kr(5),oa=Kr(6),ua=(ta.range,ea.range,na.range,ra.range,aa.range,ia.range,oa.range,Xr((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),ca=(ua.range,Xr((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));ca.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Xr((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var la=ca,fa=(ca.range,Xr((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()}))),sa=(fa.range,Xr((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),ha=(sa.range,Xr((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),da=ha;ha.range;function pa(t){return Xr((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var ga=pa(0),ma=pa(1),va=pa(2),ba=pa(3),ya=pa(4),wa=pa(5),xa=pa(6),_a=(ga.range,ma.range,va.range,ba.range,ya.range,wa.range,xa.range,Xr((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Ma=(_a.range,Xr((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ma.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Xr((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Aa=Ma;Ma.range;function Ca(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ta(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Na(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Sa(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,o=t.shortDays,u=t.months,c=t.shortMonths,l=Ba(a),f=Ha(a),s=Ba(i),h=Ha(i),d=Ba(o),p=Ha(o),g=Ba(u),m=Ha(u),v=Ba(c),b=Ha(c),y={a:function(t){return o[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:ai,e:ai,f:li,g:wi,G:_i,H:ii,I:oi,j:ui,L:ci,m:fi,M:si,p:function(t){return a[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Wi,s:Xi,S:hi,u:di,U:pi,V:mi,w:vi,W:bi,x:null,X:null,y:yi,Y:xi,Z:Mi,"%":zi},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Ai,e:Ai,f:ki,g:Pi,G:$i,H:Ci,I:Ti,j:Ni,L:Si,m:Di,M:Ui,p:function(t){return a[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Wi,s:Xi,S:Ei,u:Li,U:Fi,V:Bi,w:Hi,W:ji,x:null,X:null,y:Ii,Y:Yi,Z:qi,"%":zi},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:Va,e:Va,f:ti,g:za,G:qa,H:Qa,I:Qa,j:Za,L:Ka,m:Ra,M:Ga,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=f[r[0].toLowerCase()],n+r[0].length):-1},q:Xa,Q:ni,s:ri,S:Ja,u:Ia,U:Pa,V:Ya,w:ja,W:$a,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:za,Y:qa,Z:Wa,"%":ei};function _(t,e){return function(n){var r,a,i,o=[],u=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(o.push(t.slice(c,u)),null!=(a=Da[r=t.charAt(++u)])?r=t.charAt(++u):a="e"===r?" ":"0",(i=e[r])&&(r=i(n,a)),o.push(r),c=u+1);return o.push(t.slice(c,u)),o.join("")}}function M(t,e){return function(n){var r,a,i=Na(1900,void 0,1);if(A(i,t,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(e&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=Ta(Na(i.y,0,1))).getUTCDay(),r=a>4||0===a?ma.ceil(r):ma(r),r=da.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=Ca(Na(i.y,0,1))).getDay(),r=a>4||0===a?ea.ceil(r):ea(r),r=Jr.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?Ta(Na(i.y,0,1)).getUTCDay():Ca(Na(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Ta(i)):Ca(i)}}function A(t,e,n,r){for(var a,i,o=0,u=e.length,c=n.length;o<u;){if(r>=c)return-1;if(37===(a=e.charCodeAt(o++))){if(a=e.charAt(o++),!(i=x[a in Da?e.charAt(o++):a])||(r=i(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return y.x=_(n,y),y.X=_(r,y),y.c=_(e,y),w.x=_(n,w),w.X=_(r,w),w.c=_(e,w),{format:function(t){var e=_(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var ka,Da={"-":"",_:" ",0:"0"},Ua=/^\s*\d+/,Ea=/^%/,La=/[\\^$*+?|[\]().{}]/g;function Fa(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function Oa(t){return t.replace(La,"\\$&")}function Ba(t){return new RegExp("^(?:"+t.map(Oa).join("|")+")","i")}function Ha(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ja(t,e,n){var r=Ua.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ia(t,e,n){var r=Ua.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Pa(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ya(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $a(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function qa(t,e,n){var r=Ua.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function za(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Wa(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xa(t,e,n){var r=Ua.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Ra(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Va(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Za(t,e,n){var r=Ua.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Qa(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ga(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ja(t,e,n){var r=Ua.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ka(t,e,n){var r=Ua.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ti(t,e,n){var r=Ua.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ei(t,e,n){var r=Ea.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ni(t,e,n){var r=Ua.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ri(t,e,n){var r=Ua.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ai(t,e){return Fa(t.getDate(),e,2)}function ii(t,e){return Fa(t.getHours(),e,2)}function oi(t,e){return Fa(t.getHours()%12||12,e,2)}function ui(t,e){return Fa(1+Jr.count(la(t),t),e,3)}function ci(t,e){return Fa(t.getMilliseconds(),e,3)}function li(t,e){return ci(t,e)+"000"}function fi(t,e){return Fa(t.getMonth()+1,e,2)}function si(t,e){return Fa(t.getMinutes(),e,2)}function hi(t,e){return Fa(t.getSeconds(),e,2)}function di(t){var e=t.getDay();return 0===e?7:e}function pi(t,e){return Fa(ta.count(la(t)-1,t),e,2)}function gi(t){var e=t.getDay();return e>=4||0===e?aa(t):aa.ceil(t)}function mi(t,e){return t=gi(t),Fa(aa.count(la(t),t)+(4===la(t).getDay()),e,2)}function vi(t){return t.getDay()}function bi(t,e){return Fa(ea.count(la(t)-1,t),e,2)}function yi(t,e){return Fa(t.getFullYear()%100,e,2)}function wi(t,e){return Fa((t=gi(t)).getFullYear()%100,e,2)}function xi(t,e){return Fa(t.getFullYear()%1e4,e,4)}function _i(t,e){var n=t.getDay();return Fa((t=n>=4||0===n?aa(t):aa.ceil(t)).getFullYear()%1e4,e,4)}function Mi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fa(e/60|0,"0",2)+Fa(e%60,"0",2)}function Ai(t,e){return Fa(t.getUTCDate(),e,2)}function Ci(t,e){return Fa(t.getUTCHours(),e,2)}function Ti(t,e){return Fa(t.getUTCHours()%12||12,e,2)}function Ni(t,e){return Fa(1+da.count(Aa(t),t),e,3)}function Si(t,e){return Fa(t.getUTCMilliseconds(),e,3)}function ki(t,e){return Si(t,e)+"000"}function Di(t,e){return Fa(t.getUTCMonth()+1,e,2)}function Ui(t,e){return Fa(t.getUTCMinutes(),e,2)}function Ei(t,e){return Fa(t.getUTCSeconds(),e,2)}function Li(t){var e=t.getUTCDay();return 0===e?7:e}function Fi(t,e){return Fa(ga.count(Aa(t)-1,t),e,2)}function Oi(t){var e=t.getUTCDay();return e>=4||0===e?ya(t):ya.ceil(t)}function Bi(t,e){return t=Oi(t),Fa(ya.count(Aa(t),t)+(4===Aa(t).getUTCDay()),e,2)}function Hi(t){return t.getUTCDay()}function ji(t,e){return Fa(ma.count(Aa(t)-1,t),e,2)}function Ii(t,e){return Fa(t.getUTCFullYear()%100,e,2)}function Pi(t,e){return Fa((t=Oi(t)).getUTCFullYear()%100,e,2)}function Yi(t,e){return Fa(t.getUTCFullYear()%1e4,e,4)}function $i(t,e){var n=t.getUTCDay();return Fa((t=n>=4||0===n?ya(t):ya.ceil(t)).getUTCFullYear()%1e4,e,4)}function qi(){return"+0000"}function zi(){return"%"}function Wi(t){return+t}function Xi(t){return Math.floor(+t/1e3)}!function(t){ka=Sa(t),ka.format,ka.parse,ka.utcFormat,ka.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ri(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}Ri("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ri("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Ri("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ri("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Er(sr(300,.5,0),sr(-240,.5,1)),Er(sr(-100,.75,.35),sr(80,1.5,.8)),Er(sr(260,.75,.35),sr(80,1.5,.8)),sr();function Vi(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Vi(Ri("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Vi(Ri("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Vi(Ri("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Vi(Ri("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi=function(t){return t},Gi=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},Ji=function(t,e){t.each((function(){for(var t,n,r="string"==typeof(n=this)?new ze([[document.querySelector(n)]],[document.documentElement]):new ze([[n]],qe),a=r.text().split(/\s+/).reverse(),i=[],o=(r.attr("y"),parseFloat(r.attr("dy"))||0),u=r.text(null).append("tspan").attr("x",0).attr("dy",o+"em");t=a.pop();)i.push(t),u.text(i.join(" ")),u.node().getComputedTextLength()>e&&i.length>1&&(i.pop(),u.text(i.join(" ")),i=[t],u=r.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(t))}))},Ki={d3_drawShapes:function(t,e,n,r,a,i){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",a):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",i)},d3_addText:function(t,e,n,r,a){e.append("text").attr("class",r+"label");var i=t.selectAll("g."+r+"cell text."+r+"label").data(n).text(Qi);return a&&t.selectAll("g."+r+"cell text."+r+"label").call(Ji,a),i},d3_calcType:function(t,e,n,r,a,i){var o=t.invertExtent?function(t,e,n){var r=t.range().map((function(r){var a=t.invertExtent(r);return e(a[0])+" "+n+" "+e(a[1])}));return{data:t.range(),labels:r,feature:Qi}}(t,a,i):t.ticks?function(t,e,n){var r=[];if(e.length>1)r=e;else for(var a=t.domain(),i=(a[a.length-1]-a[0])/(e-1),o=0;o<e;o++)r.push(a[0]+o*i);var u=r.map(n);return{data:r,labels:u,feature:function(e){return t(e)}}}(t,n,a):function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}}(t),u=t.range&&t.range()||t.domain();return o.labels=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],r=arguments[3],a=arguments[4];if("object"===(void 0===e?"undefined":Zi(e))){if(0===e.length)return t;for(var i=e.length;i<t.length;i++)e.push(t[i]);return e}if("function"==typeof e){for(var o=[],u=t.length,c=0;c<u;c++)o.push(e({i:c,genLength:u,generatedLabels:t,domain:n,range:r,labelDelimiter:a}));return o}return t}(o.labels,r,t.domain(),u,i),e&&(o.labels=Gi(o.labels),o.data=Gi(o.data)),o},d3_filterCells:function(t,e){var n=t.data.map((function(e,n){return{data:e,label:t.labels[n]}})).filter(e),r=n.map((function(t){return t.data})),a=n.map((function(t){return t.label}));return t.data=t.data.filter((function(t){return-1!==r.indexOf(t)})),t.labels=t.labels.filter((function(t){return-1!==a.indexOf(t)})),t},d3_placement:function(t,e,n,r,a,i){e.attr("transform",n),r.attr("transform",a),"horizontal"===t&&r.style("text-anchor",i)},d3_addEvents:function(t,e){t.on("mouseover.legend",(function(t){!function(t,e,n){t.call("cellover",n,e)}(e,t,this)})).on("mouseout.legend",(function(t){!function(t,e,n){t.call("cellout",n,e)}(e,t,this)})).on("click.legend",(function(t){!function(t,e,n){t.call("cellclick",n,e)}(e,t,this)}))},d3_title:function(t,e,n,r){if(""!==e){t.selectAll("text."+n+"legendTitle").data([e]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(e),r&&t.selectAll("text."+n+"legendTitle").call(Ji,r);var a=t.select("."+n+"legendCells"),i=t.select("."+n+"legendTitle").nodes().map((function(t){return t.getBBox().height}))[0],o=-a.nodes().map((function(t){return t.getBBox().x}))[0];a.attr("transform","translate("+o+","+i+")")}},d3_defaultLocale:{format:en,formatPrefix:nn},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};var to={legendColor:function(){var t=qr(),e="rect",n=15,r=15,a=10,i=2,o=[5],u=void 0,c=[],l="",f=!1,s="",h=Ki.d3_defaultLocale,d=Ki.d3_defaultFormatSpecifier,p=10,g="middle",m=Ki.d3_defaultDelimiter,v=void 0,b="vertical",y=!1,w=void 0,x=void 0,_=mn("cellover","cellout","cellclick");function M(M){var A=Ki.d3_calcType(t,y,o,c,h.format(d),m);M.selectAll("g").data([t]).enter().append("g").attr("class",l+"legendCells"),u&&Ki.d3_filterCells(A,u);var C=M.select("."+l+"legendCells").selectAll("."+l+"cell").data(A.data),T=C.enter().append("g").attr("class",l+"cell");T.append(e).attr("class",l+"swatch");var N=M.selectAll("g."+l+"cell "+e+"."+l+"swatch").data(A.data);Ki.d3_addEvents(T,_),C.exit().transition().style("opacity",0).remove(),N.exit().transition().style("opacity",0).remove(),N=N.merge(N),Ki.d3_drawShapes(e,N,r,n,a,w);var S=Ki.d3_addText(M,T,A.labels,l,v);C=T.merge(C);var k=S.nodes().map((function(t){return t.getBBox()})),D=N.nodes().map((function(t){return t.getBBox()}));f?N.attr("class",(function(t){return l+"swatch "+A.feature(t)})):"line"==e?N.style("stroke",A.feature):N.style("fill",A.feature);var U,E=void 0,L=void 0,F="start"==g?0:"middle"==g?.5:1;"vertical"===b?(U=k.map((function(t,e){return Math.max(t.height,D[e].height)})),E=function(t,e){return"translate(0, "+(Dn(U.slice(0,e))+e*i)+")"},L=function(t,e){return"translate( "+(D[e].width+D[e].x+p)+", "+(D[e].y+D[e].height/2+5)+")"}):"horizontal"===b&&(E=function(t,e){return"translate("+e*(D[e].width+i)+",0)"},L=function(t,e){return"translate("+(D[e].width*F+D[e].x)+",\n          "+(D[e].height+D[e].y+p+8)+")"}),Ki.d3_placement(b,C,E,S,L,g),Ki.d3_title(M,s,l,x),C.transition().style("opacity",1)}return M.scale=function(e){return arguments.length?(t=e,M):t},M.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(o=t),M):o},M.cellFilter=function(t){return arguments.length?(u=t,M):u},M.shape=function(t,n){return arguments.length?(("rect"==t||"circle"==t||"line"==t||"path"==t&&"string"==typeof n)&&(e=t,w=n),M):e},M.shapeWidth=function(t){return arguments.length?(n=+t,M):n},M.shapeHeight=function(t){return arguments.length?(r=+t,M):r},M.shapeRadius=function(t){return arguments.length?(a=+t,M):a},M.shapePadding=function(t){return arguments.length?(i=+t,M):i},M.labels=function(t){return arguments.length?(c=t,M):c},M.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(g=t),M):g},M.locale=function(t){return arguments.length?(h=on(t),M):h},M.labelFormat=function(t){return arguments.length?(d=Je(t),M):M.locale().format(d)},M.labelOffset=function(t){return arguments.length?(p=+t,M):p},M.labelDelimiter=function(t){return arguments.length?(m=t,M):m},M.labelWrap=function(t){return arguments.length?(v=t,M):v},M.useClass=function(t){return arguments.length?(!0!==t&&!1!==t||(f=t),M):f},M.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(b=t),M):b},M.ascending=function(t){return arguments.length?(y=!!t,M):y},M.classPrefix=function(t){return arguments.length?(l=t,M):l},M.title=function(t){return arguments.length?(s=t,M):s},M.titleWidth=function(t){return arguments.length?(x=t,M):x},M.textWrap=function(t){return arguments.length?(textWrap=t,M):textWrap},M.on=function(){var t=_.on.apply(_,arguments);return t===_?M:t},M},legendSize:function(){var t=qr(),e="rect",n=15,r=2,a=[5],i=void 0,o=[],u="",c="",l=Ki.d3_defaultLocale,f=Ki.d3_defaultFormatSpecifier,s=10,h="middle",d=Ki.d3_defaultDelimiter,p=void 0,g="vertical",m=!1,v=void 0,b=void 0,y=mn("cellover","cellout","cellclick");function w(w){var x=Ki.d3_calcType(t,m,a,o,l.format(f),d),_=w.selectAll("g").data([t]);i&&Ki.d3_filterCells(x,i),_.enter().append("g").attr("class",u+"legendCells");var M=w.select("."+u+"legendCells").selectAll("."+u+"cell").data(x.data),A=M.enter().append("g").attr("class",u+"cell");A.append(e).attr("class",u+"swatch");var C=w.selectAll("g."+u+"cell "+e+"."+u+"swatch");Ki.d3_addEvents(A,y),M.exit().transition().style("opacity",0).remove(),C.exit().transition().style("opacity",0).remove(),C=C.merge(C),"line"===e?(Ki.d3_drawShapes(e,C,0,n),C.attr("stroke-width",x.feature)):Ki.d3_drawShapes(e,C,x.feature,x.feature,x.feature,v);var T=Ki.d3_addText(w,A,x.labels,u,p);M=A.merge(M);var N,S,k=T.nodes().map((function(t){return t.getBBox()})),D=C.nodes().map((function(n,r){var a=n.getBBox(),i=t(x.data[r]);return"line"===e&&"horizontal"===g?a.height=a.height+i:"line"===e&&"vertical"===g&&(a.width=a.width),a})),U=kn(D,(function(t){return t.height+t.y})),E=kn(D,(function(t){return t.width+t.x})),L=void 0,F=void 0,O="start"==h?0:"middle"==h?.5:1;"vertical"===g?(N=k.map((function(t,e){return Math.max(t.height,D[e].height)})),S="circle"==e||"line"==e?D[0].height/2:0,L=function(t,e){var n=Dn(N.slice(0,e));return"translate(0, "+(S+n+e*r)+")"},F=function(t,e){return"translate( "+(E+s)+",\n          "+(D[e].y+D[e].height/2+5)+")"}):"horizontal"===g&&function(){L=function(t,n){return"translate("+(Dn(D.slice(0,n),(function(t){return t.width}))+n*r)+", "+("circle"==e||"line"==e?U/2:0)+")"};var t="line"==e?U/2:U;F=function(e,n){return"translate( "+(D[n].width*O+D[n].x)+",\n              "+(t+s)+")"}}(),Ki.d3_placement(g,M,L,T,F,h),Ki.d3_title(w,c,u,b),M.transition().style("opacity",1)}return w.scale=function(e){return arguments.length?(t=e,w):t},w.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(a=t),w):a},w.cellFilter=function(t){return arguments.length?(i=t,w):i},w.shape=function(t,n){return arguments.length?("rect"!=t&&"circle"!=t&&"line"!=t||(e=t,v=n),w):e},w.shapeWidth=function(t){return arguments.length?(n=+t,w):n},w.shapePadding=function(t){return arguments.length?(r=+t,w):r},w.labels=function(t){return arguments.length?(o=t,w):o},w.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(h=t),w):h},w.locale=function(t){return arguments.length?(l=on(t),w):l},w.labelFormat=function(t){return arguments.length?(f=Je(t),w):w.locale().format(f)},w.labelOffset=function(t){return arguments.length?(s=+t,w):s},w.labelDelimiter=function(t){return arguments.length?(d=t,w):d},w.labelWrap=function(t){return arguments.length?(p=t,w):p},w.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(g=t),w):g},w.ascending=function(t){return arguments.length?(m=!!t,w):m},w.classPrefix=function(t){return arguments.length?(u=t,w):u},w.title=function(t){return arguments.length?(c=t,w):c},w.titleWidth=function(t){return arguments.length?(b=t,w):b},w.on=function(){var t=y.on.apply(y,arguments);return t===y?w:t},w},legendSymbol:function(){var t=qr(),e="path",n=5,r=[5],a=void 0,i=[],o="",u="",c=Ki.d3_defaultLocale,l=Ki.d3_defaultFormatSpecifier,f="middle",s=10,h=Ki.d3_defaultDelimiter,d=void 0,p="vertical",g=!1,m=void 0,v=mn("cellover","cellout","cellclick");function b(b){var y=Ki.d3_calcType(t,g,r,i,c.format(l),h),w=b.selectAll("g").data([t]);a&&Ki.d3_filterCells(y,a),w.enter().append("g").attr("class",o+"legendCells");var x=b.select("."+o+"legendCells").selectAll("."+o+"cell").data(y.data),_=x.enter().append("g").attr("class",o+"cell");_.append(e).attr("class",o+"swatch");var M=b.selectAll("g."+o+"cell "+"path."+o+"swatch");Ki.d3_addEvents(_,v),x.exit().transition().style("opacity",0).remove(),M.exit().transition().style("opacity",0).remove(),M=M.merge(M),Ki.d3_drawShapes(e,M,15,15,10,y.feature);var A=Ki.d3_addText(b,_,y.labels,o,d);x=_.merge(x);var C,T=A.nodes().map((function(t){return t.getBBox()})),N=M.nodes().map((function(t){return t.getBBox()})),S=kn(N,(function(t){return t.height})),k=kn(N,(function(t){return t.width})),D=void 0,U=void 0,E="start"==f?0:"middle"==f?.5:1;"vertical"===p?(C=T.map((function(t,e){return Math.max(S,t.height)})),D=function(t,e){return"translate(0, "+(Dn(C.slice(0,e))+e*n)+" )"},U=function(t,e){return"translate( "+(k+s)+",\n              "+(N[e].y+N[e].height/2+5)+")"}):"horizontal"===p&&(D=function(t,e){return"translate( "+e*(k+n)+",0)"},U=function(t,e){return"translate( "+(N[e].width*E+N[e].x)+",\n              "+(S+s)+")"}),Ki.d3_placement(p,x,D,A,U,f),Ki.d3_title(b,u,o,m),x.transition().style("opacity",1)}return b.scale=function(e){return arguments.length?(t=e,b):t},b.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(r=t),b):r},b.cellFilter=function(t){return arguments.length?(a=t,b):a},b.shapePadding=function(t){return arguments.length?(n=+t,b):n},b.labels=function(t){return arguments.length?(i=t,b):i},b.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(f=t),b):f},b.locale=function(t){return arguments.length?(c=on(t),b):c},b.labelFormat=function(t){return arguments.length?(l=Je(t),b):b.locale().format(l)},b.labelOffset=function(t){return arguments.length?(s=+t,b):s},b.labelDelimiter=function(t){return arguments.length?(h=t,b):h},b.labelWrap=function(t){return arguments.length?(d=t,b):d},b.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(p=t),b):p},b.ascending=function(t){return arguments.length?(g=!!t,b):g},b.classPrefix=function(t){return arguments.length?(o=t,b):o},b.title=function(t){return arguments.length?(u=t,b):u},b.titleWidth=function(t){return arguments.length?(m=t,b):m},b.on=function(){var t=v.on.apply(v,arguments);return t===v?b:t},b},legendHelpers:{thresholdLabels:function(t){var e=t.i,n=t.genLength,r=t.generatedLabels,a=t.labelDelimiter;return 0===e?"Less than "+r[e].split(" "+a+" ")[1]:e===n-1?r[e].split(" "+a+" ")[0]+" or more":r[e]}}};function eo(t,e){d3.select("#map-svg").append("g").attr("id","line-svg").attr("width",t+80).attr("height",e+80)}function no(t,e,n,r,a){const i=d3.select("#line-svg");i.selectAll("g").remove(),function(t,e,n){t.append("g").append("text").attr("class","axis-label").text("Mois de l'année").attr("x",e/2+30).attr("y",n),t.append("g").append("text").attr("class","axis-label").text("Comptes").attr("x",10).attr("y",n/2).attr("transform","rotate(-90)")}(i,t+80,e+70,r&&r.name,r&&r.neighborhood);const o=i.append("g").attr("width",t+30).attr("height",e+20).attr("transform","translate(10, 30)"),u=function(t,e){return d3.scaleLinear().domain([0,e]).range([0,t])}(t,n.counts.length),c=function(t,e){return d3.scaleLinear().domain([0,d3.max(e)]).range([t,0]).nice()}(e,[...n.counts.map((t=>t.value)),...r?r.counts.map((t=>t.value)):[]]);!function(t,e,n,r){const a=d3.axisBottom(d3.scaleTime().domain([new Date(2e3,1,0),new Date(2e3,12,1)]).range([0,e]).nice()).ticks(12).tickFormat(d3.timeFormat("%b"));t.append("g").attr("class","axis").attr("transform","translate(59,"+n+")").call(a),t.attr("class","axis").append("g").attr("transform","translate(59,0)").call(d3.axisLeft(r))}(o,t,e,c);const l=function(t,e){return d3.scaleOrdinal().domain(t?["Moyenne du réseau",t.name]:["Moyenne du réseau"]).range(t?["#9a9a9a",e?"#507bde":"#f59e47"]:["#9a9a9a"])}(r,a),f=to.legendColor().scale(l).shape("rect");o.append("g").attr("transform","translate(460, 30)").call(f);const s=o.append("g").attr("width",t).attr("height",e).attr("transform","translate(60, 0)");s.append("path").datum(n.counts).attr("fill","rgba(0, 0, 0, 0)").attr("stroke","#9a9a9a").attr("stroke-width",1).attr("d",d3.line().x((function(t){return u(t.index)})).y((function(t){return c(t.value)}))),r&&s.append("path").datum(r.counts).attr("fill","rgba(0, 0, 0, 0)").attr("stroke",a?"#507bde":"#f59e47").attr("stroke-width",1).attr("d",d3.line().x((function(t){return u(t.index)})).y((function(t){return c(t.value)})))}function ro(t,e){!function(t,e){t.append("text").attr("class","graph-title").attr("x",e/2+30).attr("y",15).text("Comptes pendant la journée")}(d3.select("#area-svg").attr("width",t+80).attr("height",e+80),t)}function ao(t,e,n,r,a){const i=d3.select("#area-svg").attr("height",e+80);i.selectAll("g").remove(),function(t,e,n){t.append("g").append("text").attr("class","axis-label").text("Heures de la journée").attr("x",e/2+30).attr("y",n),t.append("g").append("text").attr("class","axis-label").text("Comptes").attr("x",10).attr("y",n/2).attr("transform","rotate(-90)")}(i,t+80,e+70,r&&r.name);const o=i.append("g").attr("width",t+30).attr("height",e+20).attr("transform","translate(10, 30)"),u=function(t){return d3.scaleLinear().domain([0,96]).range([0,t])}(t),c=function(t,e){return d3.scaleLinear().domain([0,d3.max(e)]).range([t,0]).nice()}(e,[...n.counts.map((t=>t.value)),...r?r.counts.map((t=>t.value)):[]]);!function(t,e,n,r){const a=d3.axisBottom(d3.scaleTime().range([0,e-7]).nice()).ticks(20).tickFormat(d3.timeFormat("%H:%M"));t.append("g").attr("class","axis").attr("transform","translate(59,"+n+")").call(a),t.attr("class","axis").append("g").attr("transform","translate(59,0)").call(d3.axisLeft(r))}(o,t,e,c);const l=function(t,e){return d3.scaleOrdinal().domain(t?["Moyenne du réseau",t.name]:["Moyenne du réseau"]).range(t?["#9a9a9a",e?"#507bde":"#f59e47"]:["#9a9a9a"])}(r,a),f=to.legendColor().scale(l).shape("rect");o.append("g").attr("transform","translate(640, -30)").call(f);const s=o.append("g").attr("width",t).attr("height",e).attr("transform","translate(60, 0)");s.append("path").datum(n.counts).attr("fill","#c9c9c9").attr("stroke","#9a9a9a").attr("stroke-width",1).attr("d",d3.area().x((function(t){return u(t.index)})).y0(e).y1((function(t){return c(t.value)}))),r&&s.append("path").datum(r.counts).attr("fill",a?"rgba(80, 123, 222, 0.3)":"rgba(247, 173, 99, 0.3)").attr("stroke",a?"#265bd4":"#f58516").attr("stroke-width",1).attr("d",d3.area().x((function(t){return u(t.index)})).y0(e).y1((function(t){return c(t.value)})))}function io(t){const e=d3.select("#area-svg").attr("height",130);e.selectAll("g").remove(),e.append("g").append("text").attr("class","empty-label").text("Cette donnée n'est pas disponible pour l'année choisie.").attr("x",t/2+30).attr("y",80)}function oo(t,e){!function(t,e){t.append("text").attr("class","graph-title").attr("x",e/2+30).attr("y",15).text("Comptes avant et après l'introduction de Bixis électriques")}(d3.select("#bar-svg").attr("width",t+80).attr("height",e+80),t)}function uo(t,e,n,r,a,i){const o=d3.select("#bar-svg");o.selectAll("g").remove(),function(t,e,n){t.append("g").append("text").attr("class","axis-label").text("Années").attr("x",e/2+30).attr("y",n),t.append("g").append("text").attr("class","axis-label").text("Comptes").attr("x",10).attr("y",n/2).attr("transform","rotate(-90)")}(o,t+80,e+70,a&&a.name);const u=o.append("g").attr("width",t+30).attr("height",e+20).attr("transform","translate(10, 30)"),c=function(t,e){return d3.scaleBand().padding(.2).domain(e).range([0,t])}(t,r.map((t=>t.year))),l=function(t){return d3.scaleBand().padding(.02).domain(["Average","Counter"]).range([0,t.bandwidth()])}(c),f=function(t){return d3.scaleLinear().domain([0,16e5]).range([t,0]).nice()}(e,(r.map((t=>t.counts)),a&&a.map((t=>t.counts)))),s=function(t,e){const n=["Moyenne avant BIXI","Moyenne après BIXI"];return d3.scaleOrdinal().domain(void 0===t?n:e?[...n,"Quartier avant BIXI","Quartier après BIXI"]:[...n,"Borne avant BIXI","Borne après BIXI"]).range(void 0===t?["#c9c9c9","#9a9a9a"]:["#c9c9c9","#9a9a9a",e?"#6d91e3":"#f0ab67",e?"#265bd4":"#f58516"])}(a,i);!function(t,e,n,r){t.append("g").attr("class","axis").attr("transform","translate(59,"+e+")").call(d3.axisBottom(n)),t.attr("class","axis").append("g").attr("transform","translate(59,0)").call(d3.axisLeft(r))}(u,e,c,f);const h=to.legendColor().scale(s).shape("rect");u.append("g").attr("transform","translate(740, -30)").call(h);const d=u.append("g").attr("width",t).attr("height",e).attr("transform","translate(60, 0)");d.append("g").attr("id","average-bars").selectAll("rect").data(r).enter().append("rect").attr("fill",(t=>t.year<n?s("Moyenne avant BIXI"):s("Moyenne après BIXI"))).attr("x",(t=>c(t.year)+l("Average"))).attr("y",(t=>f(t.counts))).attr("width",l.bandwidth()).attr("height",(t=>e-f(t.counts))),a&&d.append("g").attr("id","counter-bars").selectAll("rect").data(a).enter().append("rect").attr("fill",(t=>t.year<n?s(i?"Quartier avant BIXI":"Borne avant BIXI"):s(i?"Quartier après BIXI":"Borne après BIXI"))).attr("x",(t=>c(t.year)+l("Counter"))).attr("y",(t=>f(t.counts))).attr("width",l.bandwidth()).attr("height",(t=>e-f(t.counts)))}function co(t){return d3.select("#dropdown").selectAll("myOptions").data(t).enter().append("option").text((function(t){return t})).attr("value",(function(t){return t})),t[0]}function lo(t){return e=>{const n=d3.select("#dropdown").property("value"),r=e.name,a=e.neighborhood;t(n,r,a)}}function fo(t,e){d3.select("#counter-name").text(t),d3.select("#neighborhood").text(e)}async function so(){const t=await d3.json("https://cdn.jsdelivr.net/npm/d3-time-format@3/locale/fr-CA.json");t.shortMonths=t.shortMonths.map((t=>t.slice(0,1).toUpperCase()+t.slice(1))),t.months=t.months.map((t=>t.slice(0,1).toUpperCase()+t.slice(1))),d3.timeFormatDefaultLocale(t)}function ho(t){if(t.counts){const e=1e3*Math.round(t.counts/1e3);return`<div class="tooltip counter-tooltip">\n        <p class="tooltip-value"><b>Nom du compteur :</b> ${t.name}</p>\n        <p class="tooltip-value"><b>Quartier :</b> ${t.neighborhood}</p>\n        <p class="tooltip-value"><b>Comptes :</b> ${e}</p>\n        </div>`}{const e=1e3*Math.round(t.averageCounts/1e3);return`<div class="tooltip neighborhood-tooltip">\n        <p class="tooltip-value"><b>Quartier :</b> ${t.name}</p>\n        ${e>0?`<p class="tooltip-value"><b>Moyenne par compteur :</b> ${e}</p>`:""}\n        </div>`}}!async function(){so();const t=800,e=700,n=400,r=250,a={width:800,height:350},i=a,o=[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],u=await yt(),c=await wt(),l=await Nt(),f=await Tt(o),s=gt().attr("class","d3-tip").html((function(t){return ho(t)}));var h,d,p;h=t,d=e,p=s,d3.select("#map-svg").call(p).attr("width",h).attr("height",d).append("g").attr("id","map-base-g").attr("width",h).attr("height",d).select((function(){return this.parentNode})).append("g").attr("id","map-lanes-g").attr("width",h).attr("height",d).select((function(){return this.parentNode})).append("g").attr("id","map-circles-g").attr("width",h).attr("height",d),ro(a.width,a.height),eo(n,r),oo(i.width,i.height);const g=d3.geoMercator().center([-73.69,45.6]).scale(85e3),m=_t(g),v=St(l,f,o,u),b=kt(v,g),y=Dt(u,b),w=Ut(v),x=Et(v),_=Lt(v);function M(t){fo("Moyenne du réseau en "+t.toString()),Ft(y[t],c,m,lo(A),s),Bt(b[t],lo(A),s),no(n,r,w[t].Average),t>2018?ao(a.width,a.height,x[t].Average):io(a.width),uo(i.width,i.height,2019,_.Average)}function A(t,e,o){fo(e,o),no(n,r,w[t].Average,w[t][e],void 0===o),t>2018?ao(a.width,a.height,x[t].Average,x[t][e],void 0===o):io(a.width),uo(i.width,i.height,2019,_.Average,_[e],void 0===o)}const C=co(o);var T;T=M,d3.select("#dropdown").on("change",(()=>{const t=d3.select("#dropdown").property("value");T(t)})),d3.select("#viz-container").style("visibility","visible"),d3.select("#spinner").style("display","none"),M(C)}(d3);
//# sourceMappingURL=index.e128053f.js.map
